$$.aQuestion={questionId:null,showNewQuestionModal:function(e,t){if(null!==e){e=$$.getRow(e,t),$$.aQuestion.questionId=this.getRowId(e);var a=e.attr("data-idx"),r=$$.aQuestion.questions[a].content;$("#qClip").val(e.attr("data-clipUrl")),$("#qContent").froalaEditor("html.set",r),$("#qAnswerA").val(e.attr("data-answerA")),$("#qAnswerB").val(e.attr("data-answerB")),$("#qAnswerC").val(e.attr("data-answerC")),$("#qAnswerD").val(e.attr("data-answerD")),void 0==e.attr("data-result")?$("#qResult input:radio[name=result]:checked").prop("checked",!1):$('#qResult input[value="'+e.attr("data-result")+'"]').prop("checked",!0),$("#qHint").val(e.attr("data-hint"))}else $$.aQuestion.questionId=null,$("#qClip").val(""),$("#qContent").froalaEditor("html.set",""),$("#qAnswerA").val(""),$("#qAnswerB").val(""),$("#qAnswerC").val(""),$("#qAnswerD").val(""),$("#qResult input:radio[name=result]:checked").prop("checked",!1),$("#qHint").val("");$("#qsModalError").html(""),$("#modalQuestion").modal("show")},init:function(){$$.aQuestion.get(),$("#qContent").froalaEditor({height:200,width:750}),$("#menuQuestion").append('<span class="sr-only">(current)</span>').parent().addClass("active"),$("#navbarSupportedContent ul").append('<li class="nav-item navbar-toggler-right" style="margin-right: 60px">   <a class="nav-link" href="#" onclick="$$.aQuestion.showNewQuestionModal(null); return false">       <i class="large material-icons text-success">add_circle_outline</i>   </a></li>')},getRowId:function(e){return e.attr("id").substring(10)},get:function(){$.ajax({type:"get",url:"/adminQuestion/getAll",success:function(e){$$.aQuestion.questions=e,$$.aQuestion.render(e)},error:function(){alert("Get all question have error !")}})},render:function(e){var t=$("#question").html("");if(e.length>0)for(i=0;i<e.length;i++){var a=e[i];t.append('<div class="card" data-idx="'+i+'" id="questionId'+a._id+'" data-result="'+a.result+'" data-answerA="'+a.answerA+'" data-answerB="'+a.answerB+'" data-answerC="'+a.answerC+'" data-answerD="'+a.answerD+'" data-hint="'+a.hint+'" data-clipUrl="'+a.clipUrl+'">   <div id="heading'+(i+1)+'" role="tab" class="card-header">       <a data-toggle="collapse" data-parent="#question" href="#collapse'+(i+1)+'" aria-expanded="true" aria-controls="collapse'+(i+1)+'">Question '+a.index+'</a>       <a href="#">           <i class="large material-icons text-danger float-right" onclick="$$.aQuestion.delete(this,3); return false;">delete_forever</i>       </a>       <a href="#">           <i style="margin-right:6px" class="large material-icons text-success float-right" onclick="$$.aQuestion.showNewQuestionModal(this,3); return false;">edit</i>       </a>       <a href="#">           <i style="margin-right:6px" class="large material-icons text-primary float-right" onclick="$$.aQuestion.moveUp(this,3,true); return false;">arrow_upward</i>       </a>       <a href="#">           <i style="margin-right:6px" class="large material-icons text-primary float-right" onclick="$$.aQuestion.moveUp(this,3,false); return false;">arrow_downward</i>       </a>   </div>   <div id="collapse'+(i+1)+'" role="tabpanel" aria-labelledby="heading'+(i+1)+'" class="collapse show">       <div class="card-block">           <div role="alert" class="alert alert-primary">'+a.content+'</div>           <div role="alert" class="alert alert-secondary"><strong>A. </strong>'+a.answerA+'</div>           <div role="alert" class="alert alert-secondary"><strong>B. </strong>'+a.answerB+'</div>           <div role="alert" class="alert alert-secondary"><strong>C. </strong>'+a.answerC+'</div>           <div role="alert" class="alert alert-secondary"><strong>D. </strong>'+a.answerD+'</div>           <div role="alert" class="alert alert-info"><strong>Hint. </strong>'+a.hint+'</div>           <div role="alert" class="alert alert-info"><strong>Result. </strong>'+a.result+'</div>           <div role="alert" class="alert alert-info"><strong>Clip. </strong>'+a.clipUrl+"</div>       </div>   </div></div>")}},onModalKeyup:function(e){13===(e.which||e.keyCode)&&$$.round3_1.save()},save:function(){var e={id:$$.aQuestion.questionId,clipUrl:$("#qClip").val().trim(),content:$("#qContent").val(),answerA:$("#qAnswerA").val().trim(),answerB:$("#qAnswerB").val().trim(),answerC:$("#qAnswerC").val().trim(),answerD:$("#qAnswerD").val().trim(),result:$("#qResult input:radio[name=result]:checked").val(),hint:$("#qHint").val().trim()};console.log($("#qContent").val()),""!=e.content?""!=e.answerA?""!=e.answerB?""!=e.answerC?""!=e.answerD?$.ajax({type:null==$$.aQuestion.questionId?"POST":"PUT",url:"/adminQuestion",data:e,dataType:"JSON",success:function(e){e.error?$$.alert("Error: Save question has errors!"):$$.aQuestion.get(),$("#modalQuestion").modal("hide")},error:function(){$$.alert("Error: Save question has errors!"),$("#modalQuestion").modal("hide")}}):$("#qsModalError").html("Answer D can not empty !"):$("#qsModalError").html("Answer C can not empty !"):$("#qsModalError").html("Answer B can not empty !"):$("#qsModalError").html("Answer A can not empty !"):$("#qsModalError").html("Question content can not empty !")},delete:function(e,t){e=$$.getRow(e,t);var a=this.getRowId(e);$$.confirm("Delete question","Are you sure you want to delete this question ?",function(){$.ajax({type:"DELETE",url:"/adminQuestion",data:{id:a},dataType:"JSON",success:function(e){e.error?$$.alert("Error: Delete question has errors!"):$$.aQuestion.get()},error:function(){$$.alert("Error: Delete question has errors!")}})})},moveUp:function(e,t,a){e=$$.getRow(e,t);var r=this.getRowId(e);$$.confirm("Move question","Are you sure you want to move "+(a?"up":"down")+" this question ?",function(){$.ajax({type:"put",url:"/adminQuestion/move",data:{id:r,status:a},dataType:"JSON",success:function(e){e.error?$$.alert("Error: Move question has errors!"):$$.aQuestion.get()},error:function(){$$.alert("Error: Move question has errors!")}})})}},$(document).ready($$.aQuestion.init);