$$.user={renderPoint:function(e){$("#userPoint").html(e[$$.userId])},getPoint:function(){$.ajax({type:"get",url:"/state/point",success:function(e){$$.user.renderPoint(e.points)},error:function(){alert("Admin: Error when get point setting!")}})},renderRound1:function(e){"send"==e.action?($$.user.question=e.question,$("#questionContent").html("").css("display","none"),$("#answerA").html("").css("display","none"),$("#answerB").html("").css("display","none"),$("#answerC").html("").css("display","none"),$("#answerD").html("").css("display","none"),$("#countdown1").css("display","none")):$$.user.question.index==e.questionIndex&&($("#questionContent").html($$.user.question.content).css("display","block"),$("#answerA").html("A. "+$$.user.question.answerA).css("display","block"),$("#answerB").html("B. "+$$.user.question.answerB).css("display","block"),$("#answerC").html("C. "+$$.user.question.answerC).css("display","block"),$("#answerD").html("D. "+$$.user.question.answerD).css("display","block"),$("#countdown1").css("display","block"),$("#questionResult").css("display","result"==e.action?"block":"none")),$.ajax({type:"PUT",url:"/user/round1/question/"+$$.user.question.index,success:function(e){e.error&&alert("User: "+error)},error:function(){alert("User: Report question has error!")}})},getRound1:function(){1==$$.user.roundIndex&&$.ajax({type:"GET",url:"/admin/round1/state",success:function(e){$$.user.question=e.question,$$.user.renderRound1(e)},error:function(){alert("User: "+$$.capitalizeFirstLetter(action)+" question "+questionIndex+"!")}})},getRound:function(){$.ajax({type:"get",url:"/state/round",success:function(e){$$.user.roundIndex=e.round,$$.user.getRound1()},error:function(){alert("User: Error when get round setting!")}})},round1Select:function(e){var n=(e=$(e)).attr("data-value").trim().toLowerCase();$.ajax({type:"PUT",url:"/user/round1/answer/"+$$.user.question.index+"/"+n,success:function(n){n.error?alert("User: "+n.error+"!"):($("#answerA").css("background-color","#f5f5f5"),$("#answerB").css("background-color","#f5f5f5"),$("#answerC").css("background-color","#f5f5f5"),$("#answerD").css("background-color","#f5f5f5"),e.css("background-color","yellow"))},error:function(){alert("User: Send answer has errors!")}})},init:function(){$$.socket.emit("login",$$.userId),$("#userAvatar").attr("src","/img/user/"+$$.userId+".png"),$$.user.getRound(),$$.user.getPoint(),$$.socket.on("round",function(e){$$.user.renderRound(e)}),$$.socket.on("point",function(e){$$.user.renderPoint(e)}),$$.socket.on("round1Do",function(e){$$.user.getRound1()})}},$(document).ready($$.user.init);