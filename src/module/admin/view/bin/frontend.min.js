$$.admin={selectScreen:function(e){$.ajax({type:"put",url:"/state/screen/"+e,success:function(e){e.error&&alert("Admin: "+e.error)},error:function(){alert("Admin: Error when get round setting!")}})},renderScreen:function(e){$(".round1Screen").attr("checked",null).parent().removeClass("active"),$("#round1Screen"+$$.capitalizeFirstLetter(e)).attr("checked","").parent().addClass("active")},getScreen:function(){$.ajax({type:"get",url:"/state/screen",success:function(e){$$.admin.renderScreen(e.screen.toLowerCase())},error:function(){alert("Admin: Error when get screen setting!")}})},renderOnline:function(e){for(var n=0;n<e.length;n++)e[n]?$("#userStatus"+n).addClass("badge-success").removeClass("badge-default"):$("#userStatus"+n).addClass("badge-default").removeClass("badge-success")},getOnline:function(){$.ajax({type:"GET",url:"/state/online",success:function(e){$$.admin.renderOnline(e)},error:function(){alert("Error: get online data!")}})},selectRound:function(e){e=$(e),$$.confirm("Change round",'Are you sure you want to change round "<b>'+e.html()+'</b>"?',function(){var n=$("#menuRound"),t=e.attr("data-value");$.ajax({type:"put",url:"/state/round",data:{key:"round",value:t},dataType:"JSON",success:function(r){r.error?console.log(r.error):n.attr("data-value",t).html(e.html())},error:function(){console.log("Admin: Error when get round setting!")}})})},getRound:function(){$.ajax({type:"get",url:"/state/round",success:function(e){var n=$("#menuRound"),t=n.next().children().eq(e.round);n.attr("data-value",e.round).html(t.html()),1==e.round&&$.ajax({type:"GET",url:"/admin/round1/state",success:function(e){$("#round1QuestionIndex").html("Question: "+e.action+" "+e.questionIndex)},error:function(){alert("Error: "+$$.capitalizeFirstLetter(action)+" question "+questionIndex+"!")}})},error:function(){alert("Admin: Error when get round setting!")}})},setPoint:function(e,n){var t=$(e).parent().parent(),r=t.attr("data-username"),o=t.children().eq(1).children().eq(0).val();$.ajax({type:"put",url:"/point",data:{username:r,point:o*n},dataType:"JSON",success:function(e){e.error&&alert("Admin: Error when set point!")},error:function(){alert("Admin: Error when set point!")}})},renderPoint:function(e){Object.keys(e).forEach(function(n){$("#userPoint"+n).html(e[n])})},getPoint:function(){$.ajax({type:"get",url:"/state/point",success:function(e){$$.admin.renderPoint(e.points)},error:function(){alert("Admin: Error when get point setting!")}})},round1Do:function(e,n){var t=$(e).parent().attr("data-value");$.ajax({type:"PUT",url:"/admin/round1/"+n+"/"+t,success:function(e){e.error&&alert("Error: "+$$.capitalizeFirstLetter(n)+" question "+t+"! "+e.error)},error:function(){alert("Error: "+$$.capitalizeFirstLetter(n)+" question "+t+"!")}})},init:function(){$("#menuHome").append('<span class="sr-only">(current)</span>').parent().addClass("active"),$$.admin.getScreen(),$$.admin.getOnline(),$$.admin.getRound(),$$.admin.getPoint(),$$.socket.on("screen",function(e){$$.admin.renderScreen(e.toLowerCase())}),$$.socket.on("online",function(e){$$.admin.renderOnline(e)}),$$.socket.on("point",function(e){$$.admin.renderPoint(e)}),$$.socket.on("round1Do",function(e){$("#round1QuestionIndex").html("Question: "+e.action+" "+e.questionIndex)})}},$(document).ready($$.admin.init);